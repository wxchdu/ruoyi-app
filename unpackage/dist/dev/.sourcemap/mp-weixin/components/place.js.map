{"version":3,"sources":["webpack:///D:/wokespace/cloud/ruoyi-app/components/place.vue?7cc1","webpack:///D:/wokespace/cloud/ruoyi-app/components/place.vue?65de","webpack:///D:/wokespace/cloud/ruoyi-app/components/place.vue?49b6","webpack:///D:/wokespace/cloud/ruoyi-app/components/place.vue?f54d","uni-app:///components/place.vue"],"names":["data","showSelector","initValue","entity","list","current","vm","haveChoose","triggered","props","title","type","hold","level","value","model","prop","event","watch","name","created","utils","methods","getPlace","url","id","success","onChoose","uni","latitude","longitude","address","fail","console","onSelected","getList","parent","active","onSelect","onItem","onParent"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACyL;AACzL,gBAAgB,gMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAmsB,CAAgB,8sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC4CvtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;IACA;IACAE;MACAF;IACA;IACAG;MACAH;IACA;EACA;EACAI;IACAC;IACAC;EACA;EACAC;IACAJ;MACA;QACA;QACA;MACA;IACA;EACA;EACAK;EACAT;EACAU;IAAA;IACAC;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACAF;UACAG;UACAxB;YACAyB;UACA;UACAC;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;QACAF;UACAL;YACAG;YACAxB;cACA6B;cACAC;YACA;YACAJ;cACA;gBACA;gBACA;gBACA;kBACAK;gBACA;kBACAA;gBACA;gBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;QACAC;UACAC;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAd;QACAG;QACAxB;UACAoC;UACAC;QACA;QACAX;UACA;YACA;cACA;gBACA;cACA;YACA;cACA;gBACAtB;gBACAC;cACA;YACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAiC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B","file":"components/place.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./place.vue?vue&type=template&id=0ebeed48&\"\nvar renderjs\nimport script from \"./place.vue?vue&type=script&lang=js&\"\nexport * from \"./place.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/place.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./place.vue?vue&type=template&id=0ebeed48&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showSelector = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.showSelector = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./place.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./place.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view style=\"height:100%;min-height:32px;width:100%;\" class=\"ux-flex\">\r\n\t\t<view class=\"e\" style=\" position: relative;  min-height:32px; height: 100%; width: 100%; font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">\r\n\t\t\t<view class=\"ux-ddd\" style=\"padding: 5px 0; width: 100%;font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\"  @click=\"onSelect\">{{entity.text||\"请选择...\"}}</view>\r\n\t\t\t<view v-if=\"haveChoose\" style=\"height:100%;padding:0px 10px;margin-left:10px;\" class=\"e\" @click=\"onChoose\">\r\n\t\t\t\t<icon class=\"iconfont icon-target\" style=\"margin-top:2px;\" type=\"\"></icon>\r\n\t\t\t\t<text style=\"white-space:nowrap;margin-left:5px;\">选择</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"ux-flex\" style=\"position:fixed;flex-flow:column;width:100%;height:100%;background-color:rgba(0,0,0,0.50);z-index:999;left:0px;top:0px;\" v-if=\"showSelector\">\r\n\t\t\t<view style=\"width:100%;height:30%;\" @click=\"showSelector=false\">\r\n\t\t\t\t<text></text>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"min-width:100%;height:55px;background-color:#ffffff;border-top-left-radius:10px;border-top-right-radius:10px;\" class=\"ux-flex focus\">\r\n\t\t\t\t<view class=\"fixe e\" style=\"flex:1;min-height:100%;\">\r\n\t\t\t\t\t<text style=\"font-size:16px;font-weight:bold;margin-left:25px;\">请选择所在地区</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"width:66px;min-height:100%;\" class=\"e c\">\r\n\t\t\t\t\t<view style=\" cursor:pointer; width:22px;height:22px;background-color:#F0F0F0;border-radius:90px;\" class=\"e c\" @click=\"showSelector=false\">\r\n\t\t\t\t\t\t<icon class=\"iconfont icon-close\" style=\"font-size:12px;margin-top:2px;margin-left:2px;text-indent: 0px;\"></icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view style=\"height:50px;overflow-y:hidden;overflow-x: overlay;background-color:#ffffff;padding-left:10px;\">\r\n\t\t\t\t<view class=\"ux-nowarp\" id=\"123\" style=\"height:100%;\">\r\n\t\t\t\t\t<view v-if=\"!current.id\" style=\"min-height:100%;margin-left:15px;padding:0px 5px;\">\r\n\t\t\t\t\t\t<text style=\"font-size:14px;font-weight:bold;\">请选择</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<navigator v-for=\"item in current.list\" style=\"min-height:100%;margin-left:15px;padding:0px 5px;\" :style=\"{'color':current.id==item.id?'#1890ff':'inherit'}\" url=\"#\" open-type=\"navigate\" @click=\"onParent(item)\">\r\n\t\t\t\t\t\t<text style=\"font-size:14px;font-weight:bold;\">{{item.name}}</text>\r\n\t\t\t\t\t</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<scroll-view class=\"fixe\" style=\"min-width:100%;flex:1;\">\r\n\t\t\t\t<view class=\"ux-wraper\" style=\"padding:0px 15px;background-color:#ffffff;\">\r\n\t\t\t\t\t<navigator style=\"float:left;height:36px;padding:0px 8px;border-width:1px;border-style:solid;margin:4px;\" class=\"e\" v-for=\"item in list\" :style=\"{'borderColor':current.id==item.id?'#1890ff':'#fff','backgroundColor':current.id==item.id?'rgba(24,144,255,0.10)':'#fff'}\" url=\"#\" open-type=\"navigate\" @click=\"onItem(item)\">\r\n\t\t\t\t\t\t<text style=\"font-size:12px;\">{{item.name}}</text>\r\n\t\t\t\t\t</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script type=\"module\">\r\nimport utils from \"../lib/utils.js\";\r\nexport default{\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tshowSelector:false,\r\n\t\t\tinitValue:null,\r\n\t\t\tentity:{},\r\n\t\t\tlist:[],\r\n\t\t\tcurrent:{},\r\n\t\t\tvm:{},\r\n\t\t\thaveChoose:false,\r\n\t\t\ttriggered:true,\r\n\t\t}\r\n\t},\r\n\tprops:{\r\n\t\ttitle:{\r\n\t\t\ttype:String,\r\n\t\t},\r\n\t\thold:{\r\n\t\t\ttype:String,\r\n\t\t},\r\n\t\tlevel:{\r\n\t\t\ttype:Number,\r\n\t\t},\r\n\t\tvalue:{\r\n\t\t\ttype:[Number,String],\r\n\t\t},\r\n\t},\r\n\tmodel:{\r\n\t\tprop:\"value\",\r\n\t\tevent:\"change\",\r\n\t},\r\n\twatch:{\r\n\t\tvalue(value){\r\n\t\t\tif(value && !this.initValue){\r\n\t\t\t\tthis.initValue = value;\r\n\t\t\t\tthis.getPlace(this.initValue);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tname:\"place\",\r\n\ttitle:\"省市地区\",\r\n\tcreated:function(){//系统初始化\r\n\t\tutils._init(this,{},true);\r\n\t\tthis.getPlace();\r\n\t\tif(this.vm.platform==\"mp-weixin\" && this.$parent && this.$parent.onChooseAddress){\r\n\t\t\tthis.haveChoose=true;\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\tgetPlace(id){\r\n\t\t\tif(id){\r\n\t\t\t\tutils.request({\r\n\t\t\t\t\turl:\"/api/lib/place.get.vo\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tid:id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:(protocol)=>{\r\n\t\t\t\t\t\tif(protocol.success){\r\n\t\t\t\t\t\t\tthis.setData(protocol.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChoose(e){\r\n\t\t\tuni.chooseLocation({\r\n\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\tutils.request({\r\n\t\t\t\t\t\turl:'/api/lib/place.by.vo',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tlatitude:res.latitude,\r\n\t\t\t\t\t\t\tlongitude:res.longitude,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess:(protocol)=>{\r\n\t\t\t\t\t\t\tif(protocol.success && protocol.data && protocol.data.entity){\r\n\t\t\t\t\t\t\t\tthis.onSelected(protocol.data.entity);\r\n\t\t\t\t\t\t\t\tvar address = res.address;\r\n\t\t\t\t\t\t\t\tif(address.indexOf(protocol.data.entity.name)>-1){\r\n\t\t\t\t\t\t\t\t\taddress = address.substring(address.indexOf(protocol.data.entity.name)+protocol.data.entity.name.length);\r\n\t\t\t\t\t\t\t\t}else if(address.indexOf(protocol.data.entity.parent$)>-1){\r\n\t\t\t\t\t\t\t\t\taddress = address.substring(address.indexOf(protocol.data.entity.parent$)+protocol.data.entity.parent$.length);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(this.$parent.onChooseAddress){\r\n\t\t\t\t\t\t\t\t\tthis.$parent.onChooseAddress(address,res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfail: (res) => {\r\n\t\t\t\t\tconsole.log(\"######\",res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonSelected(item){\r\n\t\t\tthis.entity = item;\r\n\t\t\tthis.showSelector = false;\r\n\t\t\tvar value = item.value||item.id;\r\n\t\t\tthis.value = value;\r\n\t\t\tthis.$emit(\"input\", value);\r\n\t\t\tthis.$emit(\"change\", value);\r\n\t\t},\r\n\t\tgetList(parent,selector,byClick){\r\n\t\t\tutils.request({\r\n\t\t\t\turl:\"/api/lib/place.list.vo\",\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tparent:parent||\"0\",\r\n\t\t\t\t\tactive:(selector||{})[\"id\"]\r\n\t\t\t\t},\r\n\t\t\t\tsuccess:(protocol)=>{\r\n\t\t\t\t\tif(protocol.success){\r\n\t\t\t\t\t\tif(!protocol.data.list.length){\r\n\t\t\t\t\t\t\tif(byClick){\r\n\t\t\t\t\t\t\t\tthis.onSelected(protocol.data.entity);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\t\tlist:protocol.data.list,\r\n\t\t\t\t\t\t\t\tcurrent:protocol.data.entity||{}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(byClick && protocol.data.entity && this.level && protocol.data.entity.level>=this.level){\r\n\t\t\t\t\t\t\tthis.onSelected(protocol.data.entity);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonSelect(){\r\n\t\t\tthis.showSelector = true;\r\n\t\t\tthis.getList(this.entity.parent||0,this.entity);\r\n\t\t},\r\n\t\tonItem(item){\r\n\t\t\tthis.getList(item.id||0,item,true);\r\n\t\t},\r\n\t\tonParent(item){\r\n\t\t\tthis.getList(item.parent||0,item);\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n"],"sourceRoot":""}