{"version":3,"sources":["webpack:///D:/wokespace/cloud/ruoyi-app/components/combox.vue?6d30","webpack:///D:/wokespace/cloud/ruoyi-app/components/combox.vue?91ef","webpack:///D:/wokespace/cloud/ruoyi-app/components/combox.vue?76a0","webpack:///D:/wokespace/cloud/ruoyi-app/components/combox.vue?5e8e","uni-app:///components/combox.vue"],"names":["data","label","index","showOptions","entity","list","root","tree","itype","keyword","props","title","type","items","default","etype","action","value","text","input","readonly","model","prop","event","name","watch","created","utils","methods","onShowPopup","parent","expand","requested","children","onKeyword","q","onNode","item","convertTree","result","getList","header","url","success","callback","convert","array","onInitValue","onShowSheet","itemList","uni","fail","console","bindPickerChange","onItem","onStop"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;;;AAGrD;AACyL;AACzL,gBAAgB,gMAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAosB,CAAgB,+sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACyFxtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;MACAE;IACA;IACAC;MACAH;MACAE;IACA;IACAE;MACAJ;IACA;IACAK;MACAL;IACA;IACAM;MACAN;IACA;IACAO;MACAP;IACA;IACAQ;MACAR;MACAE;IACA;EACA;EACAO;IACAC;IACAC;EACA;EACAC;EACAb;EACAc;IACA;IACAR;MACA;IACA;IACAC;MACA;IACA;IACAL;MACA;MACA;IACA;IACAE;MACA;IACA;EACA;EACAW;IACAC;IACA;IACA;IACA;MACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;QACA;UACA;UACA;QACA;MACA;QACA;UAAAC;QAAA;UACA;YACAZ;YACAD;YACAc;YACAC;YACAC;UACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QAAAC;MAAA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;MACA;QACA;UAAAP;QAAA;UACAO;UACAA;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;MACA;QACA;QACAD;QACAA;QACAE;QACA;UACA;UACAA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAC;MACA;MACAd;QACAe;QACA1C;QACAyC;QACAE;UACA;YACA;cACA;cACA;gBACAC;cACA;cACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA5B;MACA;MACA;MACA;QACA;UACA;UACA;YACA6B;UACA;YACAA;cACA5B;cAAAD;YACA;UACA;QACA;MACA;QACA;UACA6B;YACA7B;YAAAC;UACA;QACA;MACA;MACA;IACA;IACA6B;MACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACAC;MACA;MACAC;QACAD;QACAN;UACA;UACA;QACA;QACAQ;UACAC;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;UACAF;QACA;MACA;MACA;IACA;IACAG;MACA;MACA;IACA;EACA;AACA;AAAA,4B","file":"components/combox.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./combox.vue?vue&type=template&id=2f2d9ca5&\"\nvar renderjs\nimport script from \"./combox.vue?vue&type=script&lang=js&\"\nexport * from \"./combox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/combox.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./combox.vue?vue&type=template&id=2f2d9ca5&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    (_vm.itype == \"popup\" || _vm.action) &&\n    _vm.showOptions &&\n    _vm.input == \"tree\"\n      ? _vm.__map(_vm.tree, function (item, __i0__) {\n          var $orig = _vm.__get_orig(item)\n          var g0 = item.requested && !(item.children || []).length\n          return {\n            $orig: $orig,\n            g0: g0,\n          }\n        })\n      : null\n  var g1 =\n    (_vm.itype == \"popup\" || _vm.action) && _vm.showOptions\n      ? _vm.input != \"tree\" && !_vm.list.length\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showOptions = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./combox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\JS\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./combox.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view @tap.stop=\"onStop()\" class=\"e\" style=\" position: relative;  min-height:32px; height: 100%; width: 100%; font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">\r\n\t\t<view v-if=\"readonly\" style=\"background-color: rgba(0,0,0,0); width: 100%; height: 100%; z-index: 99999; position: absolute;\"><text></text></view>\r\n\t\t<view v-if=\"itype=='default' && !action\" @click=\"onShowSheet\" style=\"padding: 5px 0; width: 100%;font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">{{label||text||(readonly?\"\":\"请选择...\")}}</view>\r\n\t\t<view v-if=\"itype=='picker'\" style=\"padding: 5px 0; width: 100%;font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">{{label||text||(readonly?\"\":\"请选择...\")}}</view>\r\n\t\t<view v-if=\"itype=='picker'\" style=\"position:absolute; left: 0px; top: 0px; width: 100%; height: 100%; z-index: 2; \">\r\n\t\t\t<picker @change=\"bindPickerChange\" :value=\"index\" range-key=\"text\" :range=\"list\" style=\" color: red; width: 100%; height: 100%;\">\r\n\t\t\t\t<view style=\"position:absolute; left: 0px; top: 0px; width: 100%; height: 100%; z-index: 2; \"></view>\r\n\t\t\t</picker>\r\n\t\t</view>\r\n\t\t<view v-if=\"(itype=='popup' || action)\" class=\"e\" style=\"min-height:32px; height: 100%; width: 100%; font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">\r\n\t\t\t<view @click=\"onShowPopup\" class=\"d\" style=\"padding: 5px 0; width: 100%;font-size: inherit; color: inherit; text-indent: inherit; text-align: inherit;\">{{label||text||(readonly?\"\":\"请选择...\")}}</view>\r\n\t\t</view>\r\n\t\t<root-portal>\r\n\t\t\t<view v-if=\"(itype=='popup' || action) && showOptions\" @touchmove.stop.prevent=\"\" style=\" position:fixed;width:100%;height:100%;background-color:rgba(0,0,0,0.30);z-index:999;top:0px;left:0px;color:#000;\" :class=\"type=='bottom'?'b':'e'\" :style=\"{padding:type=='bottom'?'0':'0px'}\">\r\n\t\t\t\t<view class=\"ux-flex\" style=\"flex-flow:column; width: 100%; height:100%;overflow: hidden;background-color:#ffffff;\">\r\n\t\t\t\t\t<view style=\"height:60px;width:100%;\" class=\"ux-b ux-flex focus\">\r\n\t\t\t\t\t\t<view style=\"width:15px;height:100%;\" class=\"b c\">\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"icon && input!='query'\" style=\"width:32px;height:100%;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<span :class=\"'iconfont '+icon\" style=\"margin:0px 10px;\"></span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"!icon && input=='query'\" style=\"width:32px;height:100%;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<span class=\"iconfont icon-search\" style=\"margin:0px 10px;\"></span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"!icon && input=='select'\" style=\"width:32px;height:100%;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<span class=\"iconfont icon-zhage1\" style=\"margin:0px 10px; font-size: 20px;\"></span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"!icon && input=='tree'\" style=\"width:32px;height:100%;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<span class=\"iconfont icon-gongzuoliucheng\" style=\"margin:0px 10px; font-size: 22px;\"></span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"fixe e\" style=\"flex:1;height:100%;\">\r\n\t\t\t\t\t\t\t<span v-if=\"input!='query'\" style=\" font-size: 16px; font-weight: bold;\">选择{{title}}</span>\r\n\t\t\t\t\t\t\t<input v-if=\"input=='query'\" v-model=\"keyword\" @input=\"onKeyword\" type=\"text\" style=\" border:0px;width:100%;height:100%;background:transparent;margin:0px;color:#000000;font-size:inherit;line-height:32px;padding:0px;border-radius:0px;\" placeholder=\"请输入要搜索的内容...\"></input>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click=\"onItem(null)\" style=\"width:44px;height:100%;height:44px;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<icon class=\"iconfont icon-delete\" style=\"font-size:18px;color:#000000;\"></icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click=\"showOptions=false\" style=\"width:44px;height:100%;height:44px;\" class=\"e c\">\r\n\t\t\t\t\t\t\t<icon class=\"iconfont icon-close\" style=\"font-size:18px;color:#000000;\"></icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"em\" style=\"width: 10px; height: 100%;\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<scroll-view class=\"fixe\" scroll-y=\"true\" @click.stop=\"\" style=\"flex:1;width:100%; overflow: auto; z-index: 10;\">\r\n\t\t\t\t\t\t<view class=\"ux-wraper\" style=\"height:auto;\">\r\n\t\t\t\t\t\t\t<view class=\"rows\">\r\n\t\t\t\t\t\t\t\t<template v-if=\"input=='tree'\">\r\n\t\t\t\t\t\t\t\t\t<navigator @click=\"onItem(item)\" url=\"#\" style=\"height:50px;\" class=\"ux-flex ux-b focus\" v-for=\"item in tree\">\r\n\t\t\t\t\t\t\t\t\t\t<view @click.stop=\"onNode(item)\" class=\"e r\" :style=\"{width:(50+item.LEVEL*25)+'px'}\" style=\"height: 100%; width: 50px; padding-right: 10px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<icon v-if=\"item.requested && !(item.children||[]).length\" style=\"font-size: 14px; color: #999999;\" class=\"iconfont icon-jinyong\"></icon>\r\n\t\t\t\t\t\t\t\t\t\t\t<icon v-else-if=\"item.expand\" style=\"font-size: 14px;\" class=\"iconfont icon-triangledownfill\"></icon>\r\n\t\t\t\t\t\t\t\t\t\t\t<icon v-else style=\"font-size: 14px;\" class=\"iconfont icon-playfill\"></icon>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"fixe e d\" style=\"flex:1;min-height:100%;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"d\" style=\"width:100%; font-size: 16px;\">{{item.text||item.title||item.name||item.keyValue}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"width:55px;min-height:100%; font-weight: bold;\" class=\"e c d\">\r\n\t\t\t\t\t\t\t\t\t\t\t<icon v-if=\"(item.id||item.value)==(entity.id||entity.value)\" style=\"font-size: 22px;\" class=\"iconfont icon-check\"></icon>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"input!='tree'\">\r\n\t\t\t\t\t\t\t\t\t<navigator @click=\"onItem(item)\" url=\"#\" style=\"height:50px;\" class=\"ux-flex ux-b focus\" v-for=\"item in list\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"em\" style=\"width: 25px; height: 100%;\"></view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"fixe e d\" style=\"flex:1;min-height:100%;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"d\" style=\"width:100%; font-size: 16px;\">{{item.text||item.title||item.name||item.keyValue}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"width:55px;min-height:100%; font-weight: bold;\" class=\"e c d\">\r\n\t\t\t\t\t\t\t\t\t\t\t<icon v-if=\"(item.id||item.value)==(entity.id||entity.value)\" style=\"font-size: 22px;\" class=\"iconfont icon-check\"></icon>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<view style=\"height: 20px;\"><span></span></view>\r\n\t\t\t\t\t\t\t\t<view class=\"ux-data-empty\" v-if=\"input!='tree' && !list.length\" title=\"没有数据\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"c\" style=\"\">\r\n\t\t\t\t\t\t\t\t\t\t<span style=\"color:#999999;\">当前没有数据！</span>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<view style=\"height: 20px;width:100%;\"><text></text></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</root-portal>\r\n\t</view>\r\n</template>\r\n<script type=\"module\">\r\nimport utils from \"../lib/utils.js\";\r\nexport default{\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tlabel:\"\",\r\n\t\t\tindex:0,\r\n\t\t\tshowOptions:false,\r\n\t\t\tentity:{},\r\n\t\t\tlist:[],\r\n\t\t\troot:[],\r\n\t\t\ttree:[],\r\n\t\t\titype:\"default\",\r\n\t\t\tkeyword:null,\r\n\t\t}\r\n\t},\r\n\tprops:{\r\n\t\ttitle:{\r\n\t\t\ttype:String,\r\n\t\t},\r\n\t\titems:{\r\n\t\t\ttype:[String,Array,Object],\r\n\t\t\tdefault:() => {},\r\n\t\t},\r\n\t\tetype:{\r\n\t\t\ttype:String,\r\n\t\t\tdefault:\"default\",\r\n\t\t},\r\n\t\taction:{\r\n\t\t\ttype:String,\r\n\t\t},\r\n\t\tvalue:{\r\n\t\t\ttype:[Number,String],\r\n\t\t},\r\n\t\ttext:{\r\n\t\t\ttype:String\r\n\t\t},\r\n\t\tinput:{\r\n\t\t\ttype:String\r\n\t\t},\r\n\t\treadonly:{\r\n\t\t\ttype:Boolean,\r\n\t\t\tdefault:false\r\n\t\t}\r\n\t},\r\n\tmodel:{\r\n\t\tprop:\"value\",\r\n\t\tevent:\"change\",\r\n\t},\r\n\tname:\"combox\",\r\n\ttitle:\"下拉列表\",\r\n\twatch:{\r\n\t\t//监听值变化，再赋值给modelVal\r\n\t\tvalue(value){\r\n\t\t\tthis.onInitValue();\r\n\t\t},\r\n\t\ttext(value){\r\n\t\t\tthis.label = this.text;\r\n\t\t},\r\n\t\titems(items){\r\n\t\t\tthis.list = this.convert(items);\r\n\t\t\tthis.onInitValue();\r\n\t\t},\r\n\t\tetype(value){\r\n\t\t\tthis.itype = this.etype;\r\n\t\t}\r\n\t},\r\n\tcreated:function(){\r\n\t\tutils._init(this,{},true);\r\n\t\tthis.label = this.text;\r\n\t\tthis.itype = this.etype;\r\n\t\tif(this.items && this.items.length){\r\n\t\t\tthis.list = this.convert(this.items);\r\n\t\t\tthis.onInitValue();\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\tonShowPopup(){\r\n\t\t\tthis.showOptions = true;\r\n\t\t\tif(this.input==\"select\"){\r\n\t\t\t\tthis.getList({},(list)=>{\r\n\t\t\t\t\tthis.list = list;\r\n\t\t\t\t\tthis.onInitValue();\r\n\t\t\t\t});\r\n\t\t\t}else if(!this.list.length){\r\n\t\t\t\tthis.getList({parent:this.input=='tree'?0:null},(list)=>{\r\n\t\t\t\t\tthis.root = [{\r\n\t\t\t\t\t\ttext:\"顶级节点\",\r\n\t\t\t\t\t\tvalue:0,\r\n\t\t\t\t\t\texpand:true,\r\n\t\t\t\t\t\trequested:true,\r\n\t\t\t\t\t\tchildren:list\r\n\t\t\t\t\t}];\r\n\t\t\t\t\tthis.tree = this.convertTree(this.root);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyword(){\r\n\t\t\tthis.getList({q:this.keyword},(list)=>{\r\n\t\t\t\tthis.list = list;\r\n\t\t\t\tthis.onInitValue();\r\n\t\t\t});\r\n\t\t},\r\n\t\tonNode(item){\r\n\t\t\titem.expand = !item.expand;\r\n\t\t\tif(!item.requested){\r\n\t\t\t\tthis.getList({parent:item.value||item.id},(list)=>{\r\n\t\t\t\t\titem.children = list;\r\n\t\t\t\t\titem.requested = true;\r\n\t\t\t\t\tthis.tree = this.convertTree(this.root);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.tree = this.convertTree(this.root);\r\n\t\t\t}\r\n\t\t},\r\n\t\tconvertTree(list, parentId = 0, level = 0) {\r\n\t\t\tconst result = [];\r\n\t\t\tfor(var o in list) {\r\n\t\t\t\tvar item = list[o];\r\n\t\t\t\titem.PARENT = parentId;\r\n\t\t\t\titem.LEVEL = level;\r\n\t\t\t\tresult.push(item);\r\n\t\t\t\tif(item.expand){\r\n\t\t\t\t\tvar children = this.convertTree(item.children,item.value,level+1);\r\n\t\t\t\t\tresult.push(...children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetList(params,callback){\r\n\t\t\tlet header = {};\r\n\t\t\tif(this.action.indexOf(\"api/\")==-1 && uni.getStorageSync(\"Bearer\")){\r\n\t\t\t\theader[\"Authorization\"] = \"Bearer \"+uni.getStorageSync(\"Bearer\");\r\n\t\t\t}\r\n\t\t\tutils.request({\r\n\t\t\t\turl:this.action,\r\n\t\t\t\tdata:params,\r\n\t\t\t\theader:header,\r\n\t\t\t\tsuccess:(protocol)=>{\r\n\t\t\t\t\tif(protocol.success||protocol.code==200){\r\n\t\t\t\t\t\tif(protocol.data){\r\n\t\t\t\t\t\t\tlet list = protocol.data.list || protocol.data;\r\n\t\t\t\t\t\t\tif(callback){\r\n\t\t\t\t\t\t\t\tcallback(list);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.list = list;\r\n\t\t\t\t\t\t\tthis.onInitValue();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tconvert(value){\r\n\t\t\tif(value && typeof(value)==\"string\"){\r\n\t\t\t\tvalue = JSON.parse(value.replace(/[']/g,\"\\\"\"));\r\n\t\t\t}\r\n\t\t\tvar array = [];\r\n\t\t\tif(Array.isArray(value)){\r\n\t\t\t\tfor(var o in value){\r\n\t\t\t\t\tvar item = value[o];\r\n\t\t\t\t\tif(typeof(item)==\"object\"){\r\n\t\t\t\t\t\tarray.push(item);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tarray.push({\r\n\t\t\t\t\t\t\ttext:item,value:item\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(typeof(value)==\"object\"){\r\n\t\t\t\tfor(var o in value){\r\n\t\t\t\t\tarray.push({\r\n\t\t\t\t\t\tvalue:o,text:value[o]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn array;\r\n\t\t},\r\n\t\tonInitValue(){\r\n\t\t\tfor(var o in this.list){\r\n\t\t\t\tif((this.list[o].value||this.list[o].id)==this.value){\r\n\t\t\t\t\tvar item = this.entity = this.list[o];\r\n\t\t\t\t\tthis.index = o;\r\n\t\t\t\t\tthis.label = item.text || item.title || item.name;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.list.length>6){\r\n\t\t\t\tthis.itype = \"popup\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShowSheet(){\r\n\t\t\tvar itemList=[];\r\n\t\t\tfor(var o in this.list){\r\n\t\t\t\tvar item = this.list[o];\r\n\t\t\t\titemList.push(item.text || item.title || item.name);\r\n\t\t\t}\r\n\t\t\tuni.showActionSheet({\r\n\t\t\t\titemList: itemList,\r\n\t\t\t\tsuccess: (res)=>{\r\n\t\t\t\t\tthis.index = res.tapIndex;\r\n\t\t\t\t\tthis.onItem(this.list[this.index]);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (res)=>{\r\n\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t}\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tbindPickerChange(e){\r\n\t\t\tthis.index = e.detail.value;\r\n\t\t\tthis.onItem(this.list[e.detail.value]);\r\n\t\t},\r\n\t\tonItem(item){\r\n\t\t\tthis.entity=item;\r\n\t\t\tif(!item){\r\n\t\t\t\tthis.label = null;\r\n\t\t\t\tthis.$emit(\"input\", null);\r\n\t\t\t\tthis.$emit(\"change\", null);\r\n\t\t\t}else{\r\n\t\t\t\tthis.label = item.text || item.title || item.name;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif(typeof(item.id)!=\"undefined\"){\r\n\t\t\t\t\t\tthis.$emit(\"input\", item.id);\r\n\t\t\t\t\t\tthis.$emit(\"change\", item.id);\r\n\t\t\t\t\t}else if(typeof(item.value)!=\"undefined\"){\r\n\t\t\t\t\t\tthis.$emit(\"input\", item.value);\r\n\t\t\t\t\t\tthis.$emit(\"change\", item.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(ex){\r\n\t\t\t\t\tconsole.error(ex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.showOptions=false;\r\n\t\t},\r\n\t\tonStop(e){\r\n\t\t\t//e.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":""}